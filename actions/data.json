{"actions": [{
    "id": "food.end",
    "type": "Message",
    "priority": 1,
    "condition": "{{message.dialogflow.intent == 'food.end'}}",
    "params": {
        "content": "{{ message.dialogflow.reply }}",
        "receiver": "$message.sender",
        "sender": "$message.receiver"
    }
}, {
    "id": "connect.dexcom.oauth",
    "type": "OAuth",
    "priority": 2,
    "condition": "{{message.dialogflow.action == 'connect.dexcom'}}",
    "params": {
        "person_id": "$sender.id.value",
        "provider": "dexcom"
    }
}, {
    "id": "connect.dexcom.message",
    "type": "Message",
    "priority": 1,
    "condition": "{{message.dialogflow.action == 'connect.dexcom'}}",
    "params": {
        "content": "Visit {{ oauth.url }}",
        "sender": "$message.receiver",
        "receiver": "$message.sender"
    }
}, {
    "id": "data.pattern.dexcom",
    "type": "SimplePatternCheck",
    "priority": 2,
    "hold_secs": 3600,
    "condition": "{{data.source.type == 'dexcom'}}",
    "params": {
        "person_id": "$data.source.value",
        "max_threshold": 30,
        "seconds": 14400,
        "name": "glucose"
    }
}, {
    "id": "data.pattern.update",
    "type": "Update",
    "priority": 1,
    "condition": "{{data.pattern == 'slope'}}",
    "params": {
        "content": "{'dialogflow': {'context': {'name': 'food_report', 'lifespan': 5}}}",
        "identifier": "$sender.id"
    }
}, {
    "id": "data.pattern.message",
    "type": "Message",
    "priority": 1,
    "condition": "{{data.pattern == 'slope'}}",
    "params": {
        "content": "What did you eat?",
        "receiver": "$sender.id"
    }
}, {
    "id": "food.report",
    "type": "Message",
    "priority": 1,
    "condition": "{{message.dialogflow.action == 'food.report'}}",
    "params": {
        "content": "{{ message.dialogflow.reply }}",
        "sender": "$message.receiver",
        "receiver": "$message.sender"
    }
}, {
    "id": "medication.report",
    "type": "Message",
    "priority": 1,
    "condition": "{{message.dialogflow.intent == 'medication.report'}}",
    "params": {
        "content": [
            {
                "id": "1",
                "message": "Got it"
            },{
                "id": "2",
                "message": "Thanks for the update."
            },{
                "id": "3",
                "message": "Bravo!"
            }],
        "receiver": "$message.sender",
        "sender": "$message.receiver"
    }
}, {
    "id": "connect.google.oauth",
    "type": "OAuth",
    "priority": 2,
    "condition": "{{message.dialogflow.action == 'connect.google'}}",
    "params": {
        "provider": "google",
        "person_id": "$sender.id.value"
    }
}, {
    "id": "connect.google.message",
    "type": "Message",
    "priority": 1,
    "condition": "{{message.dialogflow.intent == 'connect.google'}}",
    "params": {
        "content": "Visit {{ oauth.url }}",
        "receiver": "$message.sender",
        "sender": "$message.receiver"
    }
}, {
    "id": "settings.update",
    "type": "Update",
    "priority": 1,
    "condition": "{{message.dialogflow.intent.split('.', 1)[0] in ['activity', 'biomarker', 'food', 'medication']}}",
    "params": {
        "list_name": "topics",
        "content": "{{message.dialogflow.intent.split('.', 1)[:1]}}",
        "identifier": "$sender.id"
    }
}]}
